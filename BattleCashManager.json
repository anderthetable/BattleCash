{
  "contractName": "BattleCashManager",
  "constructorInputs": [
    {
      "name": "BattleCashArenaTemplate",
      "type": "bytes"
    }
  ],
  "abi": [
    {
      "name": "createBattle",
      "inputs": [
        {
          "name": "owner",
          "type": "bytes20"
        },
        {
          "name": "prizeId",
          "type": "bytes32"
        },
        {
          "name": "championId1",
          "type": "bytes32"
        },
        {
          "name": "championId2",
          "type": "bytes32"
        }
      ]
    }
  ],
  "bytecode": "OP_TXINPUTCOUNT OP_4 OP_NUMEQUALVERIFY OP_0 OP_UTXOTOKENCATEGORY OP_0 OP_EQUAL OP_NOT OP_0 OP_UTXOTOKENCATEGORY OP_SIZE OP_NIP 20 OP_NUMEQUAL OP_BOOLAND OP_0 OP_UTXOTOKENCOMMITMENT OP_0 OP_EQUAL OP_NOT OP_BOOLAND OP_VERIFY OP_1 OP_UTXOTOKENCATEGORY OP_0 OP_EQUAL OP_NOT OP_1 OP_UTXOTOKENCATEGORY OP_SIZE OP_NIP 20 OP_NUMEQUAL OP_BOOLAND OP_1 OP_UTXOTOKENCOMMITMENT OP_0 OP_EQUAL OP_BOOLAND OP_VERIFY OP_2 OP_UTXOTOKENCATEGORY OP_0 OP_EQUAL OP_NOT OP_2 OP_UTXOTOKENCATEGORY OP_SIZE OP_NIP 21 OP_NUMEQUAL OP_BOOLAND OP_2 OP_UTXOTOKENCATEGORY 20 OP_SPLIT OP_NIP OP_REVERSEBYTES OP_2 OP_EQUAL OP_BOOLAND OP_2 OP_UTXOTOKENCOMMITMENT OP_0 OP_EQUAL OP_NOT OP_BOOLAND OP_VERIFY OP_3 OP_UTXOTOKENCATEGORY OP_0 OP_EQUAL OP_3 OP_UTXOVALUE b80b OP_GREATERTHANOREQUAL OP_BOOLAND OP_VERIFY OP_0 OP_BEGIN OP_DUP OP_OUTPUTTOKENCATEGORY OP_OVER OP_UTXOTOKENCATEGORY OP_EQUALVERIFY OP_DUP OP_OUTPUTTOKENCOMMITMENT OP_OVER OP_UTXOTOKENCOMMITMENT OP_EQUALVERIFY OP_DUP OP_OUTPUTVALUE OP_OVER OP_UTXOVALUE OP_NUMEQUALVERIFY OP_DUP OP_1ADD OP_NIP OP_DUP OP_3 OP_GREATERTHANOREQUAL OP_UNTIL OP_0 OP_OUTPUTBYTECODE aa20 20 OP_8 OP_PICK OP_CAT 20 OP_CAT OP_7 OP_PICK OP_CAT 20 OP_CAT OP_6 OP_PICK OP_CAT 14 OP_CAT OP_5 OP_PICK OP_CAT OP_4 OP_PICK OP_CAT OP_HASH256 OP_CAT 87 OP_CAT OP_EQUALVERIFY OP_0 OP_OUTPUTTOKENAMOUNT OP_0 OP_UTXOTOKENAMOUNT OP_NUMEQUALVERIFY OP_1 OP_OUTPUTBYTECODE OP_1 OP_UTXOBYTECODE OP_EQUALVERIFY OP_1 OP_OUTPUTTOKENAMOUNT OP_1 OP_UTXOTOKENAMOUNT OP_5 OP_SUB OP_NUMEQUALVERIFY OP_2 OP_OUTPUTBYTECODE OP_2 OP_UTXOBYTECODE OP_EQUALVERIFY OP_2 OP_OUTPUTTOKENAMOUNT OP_2 OP_UTXOTOKENAMOUNT OP_NUMEQUALVERIFY OP_3 OP_OUTPUTBYTECODE aa20 20 OP_8 OP_PICK OP_CAT 20 OP_CAT OP_7 OP_PICK OP_CAT 20 OP_CAT OP_6 OP_PICK OP_CAT 14 OP_CAT OP_5 OP_PICK OP_CAT OP_4 OP_PICK OP_CAT OP_HASH256 OP_CAT 87 OP_CAT OP_EQUALVERIFY OP_3 OP_OUTPUTTOKENAMOUNT OP_5 OP_NUMEQUALVERIFY OP_3 OP_OUTPUTTOKENCOMMITMENT OP_1 OP_UTXOTOKENCOMMITMENT OP_EQUALVERIFY OP_3 OP_OUTPUTTOKENCATEGORY OP_1 OP_UTXOTOKENCATEGORY OP_EQUALVERIFY OP_3 OP_OUTPUTVALUE OP_1 OP_UTXOVALUE OP_NUMEQUALVERIFY OP_4 OP_OUTPUTBYTECODE aa20 20 OP_8 OP_ROLL OP_CAT 20 OP_CAT OP_7 OP_ROLL OP_CAT 20 OP_CAT OP_6 OP_ROLL OP_CAT 14 OP_CAT OP_5 OP_ROLL OP_CAT OP_4 OP_ROLL OP_CAT OP_HASH256 OP_CAT 87 OP_CAT OP_EQUALVERIFY OP_4 OP_OUTPUTTOKENAMOUNT OP_2 OP_UTXOTOKENAMOUNT OP_NUMEQUALVERIFY OP_4 OP_OUTPUTTOKENCOMMITMENT OP_2 OP_UTXOTOKENCOMMITMENT OP_EQUALVERIFY OP_1 OP_UTXOTOKENCATEGORY OP_4 OP_OUTPUTTOKENCATEGORY OP_4 OP_OUTPUTTOKENCATEGORY OP_1 OP_UTXOTOKENCATEGORY OP_1 OP_CAT OP_EQUALVERIFY OP_4 OP_OUTPUTVALUE OP_2 OP_UTXOVALUE OP_NUMEQUALVERIFY OP_3 OP_UTXOVALUE b80b OP_NUMEQUAL OP_IF OP_TXOUTPUTCOUNT OP_5 OP_NUMEQUALVERIFY OP_ELSE OP_TXOUTPUTCOUNT OP_6 OP_NUMEQUALVERIFY OP_5 OP_OUTPUTBYTECODE OP_3 OP_UTXOBYTECODE OP_EQUALVERIFY OP_5 OP_OUTPUTTOKENCATEGORY OP_0 OP_EQUAL OP_5 OP_OUTPUTVALUE OP_3 OP_UTXOVALUE d007 OP_SUB OP_NUMEQUAL OP_BOOLAND OP_VERIFY OP_ENDIF OP_2DROP OP_DROP OP_1",
  "source": "pragma cashscript ^0.13.0;\r\n\r\ncontract BattleCashManager(bytes BattleCashArenaTemplate) {\r\n\r\n    function createBattle(bytes20 owner, bytes32 prizeId, bytes32 championId1, bytes32 championId2) {\r\n        \r\n        require(tx.inputs.length == 4);\r\n\r\n        require(tx.inputs[0].tokenCategory != 0x && tx.inputs[0].tokenCategory.length == 32 && tx.inputs[0].nftCommitment != 0x);\r\n\r\n        require(tx.inputs[1].tokenCategory != 0x && tx.inputs[1].tokenCategory.length == 32 && tx.inputs[1].nftCommitment == 0x);\r\n\r\n        require(tx.inputs[2].tokenCategory != 0x && tx.inputs[2].tokenCategory.length == 33 && tx.inputs[2].tokenCategory.split(32)[1].reverse() == 0x02 && tx.inputs[2].nftCommitment != 0x);\r\n\r\n        require(tx.inputs[3].tokenCategory == 0x && tx.inputs[3].value >= 3000);\r\n\r\n        int outputIndex = 0;\r\n\r\n        do {\r\n            require(tx.outputs[outputIndex].tokenCategory == tx.inputs[outputIndex].tokenCategory);\r\n            require(tx.outputs[outputIndex].nftCommitment == tx.inputs[outputIndex].nftCommitment);\r\n            require(tx.outputs[outputIndex].value == tx.inputs[outputIndex].value);\r\n            outputIndex = outputIndex + 1;\r\n            console.log(outputIndex);\r\n        } while(outputIndex < 3);\r\n\r\n        require(tx.outputs[0].lockingBytecode == new LockingBytecodeP2SH32(hash256(bytes1(0x20) + championId2 + bytes1(0x20) + championId1 + bytes1(0x20) + prizeId + bytes1(0x14) + owner + BattleCashArenaTemplate)));\r\n        require(tx.outputs[0].tokenAmount == tx.inputs[0].tokenAmount);        \r\n\r\n        require(tx.outputs[1].lockingBytecode == tx.inputs[1].lockingBytecode);\r\n        require(tx.outputs[1].tokenAmount == tx.inputs[1].tokenAmount - 5);\r\n\r\n        require(tx.outputs[2].lockingBytecode == tx.inputs[2].lockingBytecode);\r\n        require(tx.outputs[2].tokenAmount == tx.inputs[2].tokenAmount);\r\n\r\n        require(tx.outputs[3].lockingBytecode == new LockingBytecodeP2SH32(hash256(bytes1(0x20) + championId2 + bytes1(0x20) + championId1 + bytes1(0x20) + prizeId + bytes1(0x14) + owner + BattleCashArenaTemplate)));\r\n        require(tx.outputs[3].tokenAmount == 5);\r\n        require(tx.outputs[3].nftCommitment == tx.inputs[1].nftCommitment);\r\n        require(tx.outputs[3].tokenCategory == tx.inputs[1].tokenCategory);\r\n        require(tx.outputs[3].value == tx.inputs[1].value);\r\n\r\n        require(tx.outputs[4].lockingBytecode == new LockingBytecodeP2SH32(hash256(bytes1(0x20) + championId2 + bytes1(0x20) + championId1 + bytes1(0x20) + prizeId + bytes1(0x14) + owner + BattleCashArenaTemplate)));\r\n        require(tx.outputs[4].tokenAmount == tx.inputs[2].tokenAmount);\r\n        require(tx.outputs[4].nftCommitment == tx.inputs[2].nftCommitment);\r\n        bytes a = tx.inputs[1].tokenCategory;\r\n        bytes b = tx.outputs[4].tokenCategory;\r\n        console.log(a);\r\n        console.log(b);\r\n        require(tx.outputs[4].tokenCategory == tx.inputs[1].tokenCategory + 0x01);\r\n        require(tx.outputs[4].value == tx.inputs[2].value);\r\n\r\n        if(tx.inputs[3].value == 3000){\r\n            require(tx.outputs.length == 5);\r\n        } else{\r\n            require(tx.outputs.length == 6);\r\n            require(tx.outputs[5].lockingBytecode == tx.inputs[3].lockingBytecode);\r\n            require(tx.outputs[5].tokenCategory == 0x && tx.outputs[5].value == tx.inputs[3].value - 2000);\r\n        }\r\n    }\r\n\r\n}",
  "debug": {
    "bytecode": "c3549d00ce00879100ce827701209c9a00cf0087919a6951ce00879151ce827701209c9a51cf00879a6952ce00879152ce827701219c9a52ce01207f77bc52879a52cf0087919a6953ce008753c602b80ba29a69006576d178ce8876d278cf8876cc78c69d768b777653a26600cd02aa20012058797e01207e57797e01207e56797e01147e55797e54797eaa7e01877e8800d300d09d51cd51c78851d351d055949d52cd52c78852d352d09d53cd02aa20012058797e01207e57797e01207e56797e01147e55797e54797eaa7e01877e8853d3559d53d251cf8853d151ce8853cc51c69d54cd02aa200120587a7e01207e577a7e01207e567a7e01147e557a7e547a7eaa7e01877e8854d352d09d54d252cf8851ce54d154d151ce517e8854cc52c69d53c602b80b9c63c4559d67c4569d55cd53c78855d1008755cc53c602d007949c9a69686d7551",
    "sourceMap": "7:16:7:32;:36::37;:8::39:1;9:26:9:27:0;:16::42:1;:46::48:0;:16:::1;;:62::63:0;:52::78:1;:::85;;:89::91:0;:52:::1;:16;:105::106:0;:95::121:1;:125::127:0;:95:::1;;:16;:8::129;11:26:11:27:0;:16::42:1;:46::48:0;:16:::1;;:62::63:0;:52::78:1;:::85;;:89::91:0;:52:::1;:16;:105::106:0;:95::121:1;:125::127:0;:95:::1;:16;:8::129;13:26:13:27:0;:16::42:1;:46::48:0;:16:::1;;:62::63:0;:52::78:1;:::85;;:89::91:0;:52:::1;:16;:105::106:0;:95::121:1;:128::130:0;:95::131:1;:::134;:::144;:148::152:0;:95:::1;:16;:166::167:0;:156::182:1;:186::188:0;:156:::1;;:16;:8::190;15:26:15:27:0;:16::42:1;:46::48:0;:16:::1;:62::63:0;:52::70:1;:74::78:0;:52:::1;:16;:8::80;17:26:17:27:0;19:8:25:33;20:31:20:42;:20::57:1;:71::82:0;:61::97:1;:12::99;21:31:21:42:0;:20::57:1;:71::82:0;:61::97:1;:12::99;22:31:22:42:0;:20::49:1;:63::74:0;:53::81:1;:12::83;23:26:23:37:0;:::41:1;:12::42;25:16:25:27:0;:30::31;19:8::33:1;;27:27:27:28:0;:16::45:1;:49::214:0;:90::94;:98::109;;:83:::1;:119::123:0;:83::124:1;:127::138:0;;:83:::1;:148::152:0;:83::153:1;:156::163:0;;:83:::1;:173::177:0;:83::178:1;:181::186:0;;:83:::1;:189::212:0;;:83:::1;:75::213;:49::214;;;:8::216;28:27:28:28:0;:16::41:1;:55::56:0;:45::69:1;:8::71;30:27:30:28:0;:16::45:1;:59::60:0;:49::77:1;:8::79;31:27:31:28:0;:16::41:1;:55::56:0;:45::69:1;:72::73:0;:45:::1;:8::75;33:27:33:28:0;:16::45:1;:59::60:0;:49::77:1;:8::79;34:27:34:28:0;:16::41:1;:55::56:0;:45::69:1;:8::71;36:27:36:28:0;:16::45:1;:49::214:0;:90::94;:98::109;;:83:::1;:119::123:0;:83::124:1;:127::138:0;;:83:::1;:148::152:0;:83::153:1;:156::163:0;;:83:::1;:173::177:0;:83::178:1;:181::186:0;;:83:::1;:189::212:0;;:83:::1;:75::213;:49::214;;;:8::216;37:27:37:28:0;:16::41:1;:45::46:0;:8::48:1;38:27:38:28:0;:16::43:1;:57::58:0;:47::73:1;:8::75;39:27:39:28:0;:16::43:1;:57::58:0;:47::73:1;:8::75;40:27:40:28:0;:16::35:1;:49::50:0;:39::57:1;:8::59;42:27:42:28:0;:16::45:1;:49::214:0;:90::94;:98::109;;:83:::1;:119::123:0;:83::124:1;:127::138:0;;:83:::1;:148::152:0;:83::153:1;:156::163:0;;:83:::1;:173::177:0;:83::178:1;:181::186:0;;:83:::1;:189::212:0;;:83:::1;:75::213;:49::214;;;:8::216;43:27:43:28:0;:16::41:1;:55::56:0;:45::69:1;:8::71;44:27:44:28:0;:16::43:1;:57::58:0;:47::73:1;:8::75;45:28:45:29:0;:18::44:1;46:29:46:30:0;:18::45:1;49:27:49:28:0;:16::43:1;:57::58:0;:47::73:1;:76::80:0;:47:::1;:8::82;50:27:50:28:0;:16::35:1;:49::50:0;:39::57:1;:8::59;52:21:52:22:0;:11::29:1;:33::37:0;:11:::1;:38:54:9:0;53:20:53:37;:41::42;:12::44:1;54:14:58:9:0;55:20:55:37;:41::42;:12::44:1;56:31:56:32:0;:20::49:1;:63::64:0;:53::81:1;:12::83;57:31:57:32:0;:20::47:1;:51::53:0;:20:::1;:68::69:0;:57::76:1;:90::91:0;:80::98:1;:101::105:0;:80:::1;:57;:20;:12::107;54:14:58:9;5:4:59:5;;",
    "logs": [
      {
        "ip": 99,
        "line": 24,
        "data": [
          {
            "stackIndex": 0,
            "type": "int",
            "ip": 99
          }
        ]
      },
      {
        "ip": 253,
        "line": 47,
        "data": [
          {
            "stackIndex": 1,
            "type": "bytes",
            "ip": 253
          }
        ]
      },
      {
        "ip": 253,
        "line": 48,
        "data": [
          {
            "stackIndex": 0,
            "type": "bytes",
            "ip": 253
          }
        ]
      }
    ],
    "requires": [
      {
        "ip": 3,
        "line": 7
      },
      {
        "ip": 22,
        "line": 9
      },
      {
        "ip": 40,
        "line": 11
      },
      {
        "ip": 68,
        "line": 13
      },
      {
        "ip": 78,
        "line": 15
      },
      {
        "ip": 85,
        "line": 20
      },
      {
        "ip": 90,
        "line": 21
      },
      {
        "ip": 95,
        "line": 22
      },
      {
        "ip": 132,
        "line": 27
      },
      {
        "ip": 137,
        "line": 28
      },
      {
        "ip": 142,
        "line": 30
      },
      {
        "ip": 149,
        "line": 31
      },
      {
        "ip": 154,
        "line": 33
      },
      {
        "ip": 159,
        "line": 34
      },
      {
        "ip": 189,
        "line": 36
      },
      {
        "ip": 193,
        "line": 37
      },
      {
        "ip": 198,
        "line": 38
      },
      {
        "ip": 203,
        "line": 39
      },
      {
        "ip": 208,
        "line": 40
      },
      {
        "ip": 238,
        "line": 42
      },
      {
        "ip": 243,
        "line": 43
      },
      {
        "ip": 248,
        "line": 44
      },
      {
        "ip": 259,
        "line": 49
      },
      {
        "ip": 264,
        "line": 50
      },
      {
        "ip": 272,
        "line": 53
      },
      {
        "ip": 276,
        "line": 55
      },
      {
        "ip": 281,
        "line": 56
      },
      {
        "ip": 294,
        "line": 57
      }
    ]
  },
  "compiler": {
    "name": "cashc",
    "version": "0.13.0-next.1"
  },
  "updatedAt": "2025-11-18T13:28:34.613Z"
}